<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Validador de PDFs</title>
    <link rel="stylesheet" href="styles.css" />
</head>
<body>

<div class="card">
    <h1>Validador de Carpetas PDF</h1>

    <div class="config-section">
        <div class="select-wrapper">
            <label for="tipoValidacion">Tipo de validaciÃ³n</label>
            <select id="tipoValidacion">
                <option value="evento">ğŸ“‹ Por evento</option>
                <option value="paquete" selected>ğŸ“¦ Por paquete</option>
            </select>
        </div>

        <div id="paqueteOptions" class="paquete-options">
            <div class="select-wrapper">
                <label for="tipoPaquete">Tipo de paquete</label>
                <select id="tipoPaquete">
                    <option value="cronico">ğŸ¥ CrÃ³nico</option>
                    <option value="cronico-terapias" selected>ğŸ’Š CrÃ³nico con terapias</option>
                </select>
            </div>
        </div>

        <div class="select-wrapper">
            <label for="convenio">Convenio</label>
            <select id="convenio">
                <option value="capital-salud">ğŸ¢ Capital Salud</option>
                <option value="fomag" selected>ğŸ›ï¸ FOMAG</option>
            </select>
        </div>
    </div>

    <label class="file">
        ğŸ“ Seleccionar carpeta
        <input type="file" id="inputFolder" webkitdirectory directory multiple />
    </label>

    <button id="btnLimpiar" class="btn-limpiar-todo oculto">ğŸ—‘ï¸ Limpiar todo</button>

    <div id="estado" class="estado oculto"></div>

    <!-- Barra de progreso -->
    <div id="barraProgreso" class="barra-progreso oculto">
        <div class="progreso-header">
            <div class="progreso-info">
                <span id="progresoTexto">Procesando...</span>
                <span id="progresoDetalle" class="progreso-detalle"></span>
            </div>
            <span id="progresoPorcentaje" class="progreso-porcentaje">0%</span>
        </div>
        <div class="progreso-barra">
            <div id="progresoFill" class="progreso-fill"></div>
        </div>
    </div>

    <!-- Resumen de validaciÃ³n -->
    <div id="resumen" class="resumen oculto">
        <h3>ğŸ“Š Resumen de ValidaciÃ³n</h3>
        <div class="resumen-container">
            <!-- Columna izquierda: EstadÃ­sticas generales -->
            <div class="resumen-general">
                <div class="resumen-stats">
                    <div class="stat-item">
                        <span class="stat-label">Total carpetas:</span>
                        <span class="stat-value" id="statTotal">0</span>
                    </div>
                    <div class="stat-item success">
                        <span class="stat-label">âœ” Sin errores:</span>
                        <span class="stat-value" id="statExito">0</span>
                    </div>
                    <div class="stat-item warning">
                        <span class="stat-label">âš  Con alertas:</span>
                        <span class="stat-value" id="statAlertas">0</span>
                    </div>
                    <div class="stat-item error">
                        <span class="stat-label">âœ– Con errores:</span>
                        <span class="stat-value" id="statErrores">0</span>
                    </div>
                </div>
            </div>
            
            <!-- Columna derecha: Errores por tipo -->
            <div id="resumenErrores" class="resumen-errores oculto">
                <h4>ğŸ“„ Errores por tipo</h4>
                <div id="listaErrores" class="lista-errores"></div>
            </div>
        </div>
    </div>

    <!-- Barra de bÃºsqueda y filtros -->
    <div id="filtros" class="filtros oculto">
        <div class="filtro-item">
            <label for="buscarDocumento">ğŸ” Buscar por documento:</label>
            <input type="text" id="buscarDocumento" placeholder="Ingrese nÃºmero de documento..." />
        </div>
        <div class="filtro-item">
            <label for="filtroEstado">ğŸ“Š Filtrar por estado:</label>
            <select id="filtroEstado">
                <option value="">ğŸ“‹ Todos los estados</option>
                <option value="sin-errores">âœ… Sin errores</option>
                <option value="con-alertas">âš ï¸ Con alertas</option>
                <option value="con-errores">âŒ Con errores</option>
            </select>
        </div>
        <div class="filtro-item">
            <label for="filtroServicio">ğŸ¥ Filtrar por servicio:</label>
            <select id="filtroServicio">
                <option value="">ğŸ¯ Todos los servicios</option>
                <option value="VM">ğŸ©º VM - Visita MÃ©dica</option>
                <option value="ENF">ğŸ’‰ ENF - EnfermerÃ­a</option>
                <option value="TF">ğŸƒ TF - Terapia FÃ­sica</option>
                <option value="TR">ğŸ« TR - Terapia Respiratoria</option>
                <option value="SUCCION">ğŸŒ¬ï¸ SUCCION - Terapia SucciÃ³n</option>
                <option value="PSI">ğŸ§  PSI - PsicologÃ­a</option>
                <option value="TS">ğŸ‘¥ TS - Trabajo Social</option>
            </select>
        </div>
        <div class="filtro-item checkbox-item destacado">
            <label>
                <input type="checkbox" id="mostrarExitos" checked />
                âœ“ Mostrar validaciones exitosas
            </label>
        </div>
        <button id="limpiarFiltros" class="btn-limpiar">ğŸ”„ Limpiar filtros</button>
    </div>

    <div class="table-wrapper">
        <table id="tabla">
            <thead id="tablaHeader">
                <tr>
                    <th>Tipo</th>
                    <th>Carpeta</th>
                    <th>2.pdf</th>
                    <th>3.pdf</th>
                    <th>4.pdf</th>
                    <th>5.pdf</th>
                    <th>Cant.</th>
                    <th>Fechas (cantidad y detalle)</th>
                    <th>Errores</th>
                </tr>
            </thead>
            <tbody id="tablaBody"></tbody>
        </table>
    </div>
</div>

<!-- Modal para mostrar PDFs -->
<div id="pdfModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="pdfModalTitle">PDF</h2>
            <span class="modal-close" onclick="cerrarModal()">&times;</span>
        </div>
        <div class="modal-body">
            <iframe id="pdfFrame" src="" frameborder="0"></iframe>
        </div>
    </div>
</div>

<script type="module" src="src/app.js"></script>
</body>
</html>
